<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Project EDDIE: Modeling Climate Change Effects on Lakes Using Distributed Computing • learnglm</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Project EDDIE: Modeling Climate Change Effects on Lakes Using Distributed Computing">
<meta property="og:description" content="learnglm">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">learnglm</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/eddie.html">Project EDDIE: Modeling Climate Change Effects on Lakes Using Distributed Computing</a>
    </li>
    <li>
      <a href="../articles/hypsography.html">Generating Hypsography</a>
    </li>
    <li>
      <a href="../articles/wilma.html">Wilma</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="eddie_files/header-attrs-2.14/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Project EDDIE: Modeling Climate Change Effects on Lakes Using Distributed Computing</h1>
                        <h4 class="author">Jemma Stachelek</h4>
            
            <h4 class="date">2022-06-22</h4>
      
      
      <div class="hidden name"><code>eddie.Rmd</code></div>

    </div>

    
    
<!-- <script src="js/hideOutput.js"></script> -->
<p>Project EDDIE is a series of activities entitled and developed by:</p>
<blockquote>
<p>Modeling Climate Change Effects on Lakes Using Distributed Computing Module This module was initially developed by Carey, C.C., S. Aditya, K. Subratie, and R. Figueiredo. 1 May 2016. <a href="http://cemast.illinoisstate.edu/data-for-students/modules/lake-modeling.shtml">http://cemast.illinoisstate.edu/data-for-students/modules/lake-modeling.shtml</a> (Module development was supported by NSF DEB 1245707 and ACI 1234983).</p>
</blockquote>
<p>The following tutorial loosely follows the Project EDDIE steps with the exception of using the built-in <code>run_example_sim</code> function in the <code>glmtools</code> package to complete the initial set-up and file handling. This streamlines setup and avoids manual interaction with system files.</p>
<div id="activity-a" class="section level2">
<h2 class="hasAnchor">
<a href="#activity-a" class="anchor"></a>ACTIVITY A</h2>
<div id="objective-1-download-the-glm-files-and-r-packages-successfully-onto-your-computer-" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-1-download-the-glm-files-and-r-packages-successfully-onto-your-computer-" class="anchor"></a>OBJECTIVE 1: Download the GLM files and R packages successfully onto your computer.</h3>
<div id="install-and-load-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#install-and-load-packages" class="anchor"></a>Install and load packages</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'sp'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'glmtools'</span>, repos<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'http://cran.rstudio.com'</span>, <span class="st">'http://owi.usgs.gov/R'</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/USGS-R/glmtools">glmtools</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="verify-setup" class="section level4">
<h4 class="hasAnchor">
<a href="#verify-setup" class="anchor"></a>Verify setup</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">glm_version</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>        <span class="ex">------------------------------------------------</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>       <span class="kw">|</span>  <span class="ex">General</span> Lake Model <span class="er">(</span><span class="ex">GLM</span><span class="kw">)</span>   <span class="ex">Version</span> 2.2.0rc5    <span class="kw">|</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>       <span class="ex">------------------------------------------------</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="ex">--help</span>  : show this blurb</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">--nml</span> <span class="op">&lt;</span>nmlfile<span class="op">&gt;</span> : get parameters from nmlfile</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="ex">--xdisp</span> : display temp/salt and selected others in x-window</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="ex">--xdisp</span> <span class="op">&lt;</span>plotsfile<span class="op">&gt;</span> : like <span class="at">--xdisp,</span> but use <span class="op">&lt;</span>plotsfile<span class="op">&gt;</span> instead of plots.nml</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="ex">--saveall</span> : save plots to png files</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="ex">--save-all-in-one</span> : save all plots to png file</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="ex">[1]</span> 0</span></code></pre></div>
</div>
</div>
<div id="objective-2-migrate-the-example-files-that-come-with-your-downloaded-glm-files-onto-a-new-directory-on-your-computer" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-2-migrate-the-example-files-that-come-with-your-downloaded-glm-files-onto-a-new-directory-on-your-computer" class="anchor"></a>OBJECTIVE 2: Migrate the example files that come with your downloaded GLM files onto a new directory on your computer</h3>
<div id="file-handling" class="section level4">
<h4 class="hasAnchor">
<a href="#file-handling" class="anchor"></a>File handling</h4>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_folder</span> <span class="op">&lt;-</span> <span class="st">"data"</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">sim_folder</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>  
<span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/run_example_sim.html">run_example_sim</a></span><span class="op">(</span><span class="va">sim_folder</span><span class="op">)</span></code></pre></div>
<pre><code>## writing nml file to  data/glm3.nml</code></pre>
<pre><code>## Warning in glm.systemcall(sim_folder, glm_path, verbose, system.args): Custom
## path to GLM executable set via 'GLM_PATH' environment variable as: /home/jemma/
## Documents/Science/Models/GLM_docker/glm</code></pre>
<pre><code>## Warning in system2(glm_path, wait = TRUE, stdout = "", stderr = "", args =
## system.args): error in running command</code></pre>
<pre><code>## simulation complete. 
## *.nc output located in  data/output.nc</code></pre>
<pre><code>## [1] "data"</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nml_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">sim_folder</span>, <span class="st">"glm2.nml"</span><span class="op">)</span>
<span class="va">nml</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/read_nml.html">read_nml</a></span><span class="op">(</span><span class="va">nml_file</span><span class="op">)</span></code></pre></div>
<!-- <div class="fold o"> -->
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">nml</span><span class="op">)</span></code></pre></div>
<pre><code>## &amp;glm_setup
##    sim_name = 'GLMSimulation'
##    max_layers = 480
##    min_layer_vol = 0.025
##    min_layer_thick = 0.1
##    max_layer_thick = 3
##    Kw = 0.331
##    coef_mix_conv = 0.2
##    coef_wind_stir = 0.402
##    coef_mix_shear = 0.2
##    coef_mix_turb = 0.51
##    coef_mix_KH = 0.1
##    coef_mix_hyp = 0.2
## /
## &amp;morphometry
##    lake_name = 'Sparkling'
##    latitude = 32
##    longitude = 35
##    bsn_len = 21000
##    bsn_wid = 13000
##    bsn_vals = 15
##    H = 301.712, 303.018285714286, 304.324571428571, 305.630857142857, 306.937142857143, 308.243428571429, 309.549714285714, 310.856, 312.162285714286, 313.468571428571, 314.774857142857, 316.081142857143, 317.387428571429, 318.693714285714, 320
##    A = 0, 45545.8263571429, 91091.6527142857, 136637.479071429, 182183.305428571, 227729.131785714, 273274.958142857, 318820.7845, 364366.610857143, 409912.437214286, 455458.263571429, 501004.089928571, 546549.916285714, 592095.742642857, 637641.569
## /
## &amp;time
##    timefmt = 2
##    start = '2010-04-15 00:00:00'
##    stop = '2010-12-30 00:00:00'
##    dt = 3600
##    timezone = 7
## /
## &amp;output
##    out_dir = '.'
##    out_fn = 'output'
##    nsave = 24
##    csv_lake_fname = 'lake'
##    csv_point_nlevs = 0
##    csv_point_fname = 'WQ_'
##    csv_point_at = 17
##    csv_point_nvars = 2
##    csv_point_vars = 'temp','salt','OXY_oxy'
##    csv_outlet_allinone = .false.
##    csv_outlet_fname = 'outlet_'
##    csv_outlet_nvars = 3
##    csv_outlet_vars = 'flow','temp','salt','OXY_oxy'
##    csv_ovrflw_fname = 'overflow'
## /
## &amp;init_profiles
##    lake_depth = 18.288
##    num_depths = 3
##    the_depths = 0, 0.2, 18.288
##    the_temps = 3, 4, 4
##    the_sals = 0, 0, 0
##    num_wq_vars = 6
##    wq_names = 'OGM_don','OGM_pon','OGM_dop','OGM_pop','OGM_doc','OGM_poc'
##    wq_init_vals = 1.1, 1.2, 1.3, 1.2, 1.3, 2.1, 2.2, 2.3, 1.2, 1.3, 3.1, 3.2, 3.3, 1.2, 1.3, 4.1, 4.2, 4.3, 1.2, 1.3, 5.1, 5.2, 5.3, 1.2, 1.3, 6.1, 6.2, 6.3, 1.2, 1.3
## /
## &amp;meteorology
##    met_sw = .true.
##    lw_type = 'LW_IN'
##    rain_sw = .false.
##    atm_stab = .false.
##    catchrain = .false.
##    rad_mode = 1
##    albedo_mode = 1
##    cloud_mode = 4
##    subdaily = .false.
##    meteo_fl = 'nldas_driver.csv'
##    wind_factor = 1
##    sw_factor = 1.08
##    lw_factor = 1
##    at_factor = 1
##    rh_factor = 1
##    rain_factor = 1
##    ce = 0.00132
##    ch = 0.0013
##    cd = 0.0013
##    rain_threshold = 0.01
##    runoff_coef = 0.3
## /
## &amp;bird_model
##    AP = 973
##    Oz = 0.279
##    WatVap = 1.1
##    AOD500 = 0.033
##    AOD380 = 0.038
##    Albedo = 0.2
## /
## &amp;inflow
##    num_inflows = 0
##    names_of_strms = 'Riv1','Riv2'
##    subm_flag = .false., .false.
##    strm_hf_angle = 65, 65
##    strmbd_slope = 2, 2
##    strmbd_drag = 0.016, 0.016
##    inflow_factor = 1, 1
##    inflow_fl = 'inflow_1.csv','inflow_2.csv'
##    inflow_varnum = 4
##    inflow_vars = 'FLOW','TEMP','SALT','OXY_oxy','SIL_rsi','NIT_amm','NIT_nit','PHS_frp','OGM_don','OGM_pon','OGM_dop','OGM_pop','OGM_doc','OGM_poc','PHY_green','PHY_crypto','PHY_diatom'
## /
## &amp;outflow
##    num_outlet = 0
##    flt_off_sw = .false.
##    outl_elvs = -215.5
##    bsn_len_outl = 799
##    bsn_wid_outl = 399
##    outflow_fl = 'outflow.csv'
##    outflow_factor = 0.8
## /
## &amp;snowice
##    snow_albedo_factor = 1
##    snow_rho_max = 300
##    snow_rho_min = 50
## /
## &amp;sed_heat
##    sed_temp_mean = 4.5
##    sed_temp_amplitude = 0.25
##    sed_temp_peak_doy = 242.5
## /</code></pre>
<!-- </div> -->
<p>Get Parameters of the <code>nml</code> control file</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/get_nml_value.html">get_nml_value</a></span><span class="op">(</span><span class="va">nml</span>, <span class="st">'lake_name'</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "Sparkling"</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/plot_meteo.html">plot_meteo</a></span><span class="op">(</span><span class="va">nml_file</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="objective-3-run-the-model-and-look-at-output" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-3-run-the-model-and-look-at-output" class="anchor"></a>OBJECTIVE 3: Run the model and look at output</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">run_glm</span><span class="op">(</span><span class="va">sim_folder</span>, verbose<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<div id="examine-model-output" class="section level4">
<h4 class="hasAnchor">
<a href="#examine-model-output" class="anchor"></a>Examine model output</h4>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nc_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data/output.nc"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/plot_temp.html">plot_temp</a></span><span class="op">(</span>file <span class="op">=</span> <span class="va">nc_file</span>, fig_path <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="objective-4-examine-how-your-modeled-glm-data-compares-to-the-observed-field-data-for-your-lake-" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-4-examine-how-your-modeled-glm-data-compares-to-the-observed-field-data-for-your-lake-" class="anchor"></a>OBJECTIVE 4: Examine how your modeled GLM data compares to the observed field data for your lake.</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">nc_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="st">"data/output.nc"</span><span class="op">)</span>
<span class="va">field_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">sim_folder</span>, <span class="st">'field_data.csv'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/plot_var_compare.html">plot_var_compare</a></span><span class="op">(</span><span class="va">nc_file</span>, <span class="va">field_path</span>, <span class="st">'temp'</span>, resample<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: Removed 38 rows containing missing values (geom_raster).</code></pre>
<p><img src="images/unnamed-chunk-5-1.png" width="700"></p>
<div id="list-and-compare-available-metrics" class="section level4">
<h4 class="hasAnchor">
<a href="#list-and-compare-available-metrics" class="anchor"></a>List and compare available metrics</h4>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/sim_metrics.html">sim_metrics</a></span><span class="op">(</span>with_nml <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "buoyancy.freq"     "center.buoyancy"   "thermo.depth"     
## [4] "water.density"     "water.temperature"</code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/compare_to_field.html">compare_to_field</a></span><span class="op">(</span><span class="va">nc_file</span>, <span class="va">field_path</span>, metric<span class="op">=</span><span class="st">"thermo.depth"</span>, 
                 as_value <span class="op">=</span> <span class="cn">TRUE</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>##               DateTime       obs       mod
## 1  2010-04-27 01:00:00  7.992360  5.750947
## 2  2010-05-10 01:00:00 10.522474  9.806721
## 3  2010-05-24 01:00:00 10.703003  9.829644
## 4  2010-06-08 01:00:00 11.348012  9.775764
## 5  2010-06-21 01:00:00 11.585997  9.700781
## 6  2010-07-06 01:00:00  6.580984  9.475542
## 7  2010-07-20 01:00:00 10.261094  4.859414
## 8  2010-08-03 01:00:00  7.572742  6.323220
## 9  2010-08-17 01:00:00  7.691791  6.285066
## 10 2010-09-01 01:00:00 11.252144  7.595761
## 11 2010-09-14 01:00:00 10.429662  8.782602
## 12 2010-09-28 01:00:00 11.588422 11.059639
## 13 2010-10-12 01:00:00 12.782920 11.410977
## 14 2010-10-26 01:00:00 14.590728 13.204661</code></pre>
</div>
<div id="plot-modeled-versus-observed-metric-values" class="section level4">
<h4 class="hasAnchor">
<a href="#plot-modeled-versus-observed-metric-values" class="anchor"></a>Plot modeled versus observed metric values</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">therm_depths</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/compare_to_field.html">compare_to_field</a></span><span class="op">(</span><span class="va">nc_file</span>, <span class="va">field_path</span>, 
                  metric<span class="op">=</span><span class="st">"thermo.depth"</span>, as_value <span class="op">=</span> <span class="cn">TRUE</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">therm_depths</span><span class="op">$</span><span class="va">DateTime</span>, <span class="va">therm_depths</span><span class="op">$</span><span class="va">obs</span>, 
     type <span class="op">=</span> <span class="st">"l"</span>, col <span class="op">=</span> <span class="st">"blue"</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">32</span><span class="op">)</span>,
     ylab<span class="op">=</span><span class="st">"Thermocline depth in meters"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="va">therm_depths</span><span class="op">$</span><span class="va">DateTime</span>, <span class="va">therm_depths</span><span class="op">$</span><span class="va">mod</span>, col <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/legend.html">legend</a></span><span class="op">(</span><span class="st">"topright"</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Observed"</span>, <span class="st">"Modeled"</span><span class="op">)</span>, lty <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>, 
     col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"red"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="images/unnamed-chunk-7-1.png" width="700"></p>
</div>
</div>
</div>
<div id="activity-b" class="section level2">
<h2 class="hasAnchor">
<a href="#activity-b" class="anchor"></a>ACTIVITY B</h2>
<div id="objective-5-develop-a-climate-change-scenario-for-your-model-lake" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-5-develop-a-climate-change-scenario-for-your-model-lake" class="anchor"></a>OBJECTIVE 5: Develop a climate change scenario for your model lake</h3>
<ul>
<li><p>Develop a climate scenario (it can be for any region!)</p></li>
<li><p>Create a corresponding meteorological input file. Think through all of the components of the proposed scenario. For example, which of the meteorological variables (air temperature, precipitation, wind, etc.) will be modified and how? Will they be short-term or long-term modifications?</p></li>
<li><p>Run the file and examine how it alters the physical structure of the lake. How does your climate scenario change the thermal structure of the lake? What does the temperature profile look like? How does the depth of the thermocline change? How does the timing of stratification and magnitude of evaporation change?</p></li>
<li><p>Compare the modeled output to the observed. What are the implications of your climate scenario for future water quality and quantity?</p></li>
<li><p>Create a few figures to highlight the results of your climate scenario. It would be helpful to present both the meteorological input file as well as the lake thermal plots so that you can see how the lake responded to your climate forcing.</p></li>
</ul>
<div id="modify-the-gml2-nml-file" class="section level4">
<h4 class="hasAnchor">
<a href="#modify-the-gml2-nml-file" class="anchor"></a>Modify the <code>gml2.nml</code> file</h4>
<ul>
<li>change model start and end to ‘2000-03-01 00:00:00’ and ‘2000-12-31 00:00:00’ respecitvely</li>
</ul>
</div>
</div>
</div>
<div id="activity-c" class="section level2">
<h2 class="hasAnchor">
<a href="#activity-c" class="anchor"></a>ACTIVITY C</h2>
<div id="objective-6-set-up-hundreds-of-glm-simulations-with-varying-input-meteorological-data" class="section level3">
<h3 class="hasAnchor">
<a href="#objective-6-set-up-hundreds-of-glm-simulations-with-varying-input-meteorological-data" class="anchor"></a>OBJECTIVE 6: Set up hundreds of GLM simulations with varying input meteorological data</h3>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">GRAPLEr</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://httr.r-lib.org/">httr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">RCurl</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://arxiv.org/abs/1403.2805">jsonlite</a></span><span class="op">)</span>

<span class="co"># setup file system</span>
<span class="co"># basedir &lt;- ""</span>
<span class="va">MyExpRootDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">basedir</span>, <span class="st">'GRAPLE'</span>,<span class="st">'MyExpRoot'</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">MyExpRootDir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>  
<span class="va">MyResultsDir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">basedir</span>, <span class="st">'GRAPLE'</span>,<span class="st">'MyResults'</span><span class="op">)</span> 
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">MyResultsDir</span>, showWarnings <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/invisible.html">invisible</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.copy</a></span><span class="op">(</span><span class="st">"job_desc.json"</span>, <span class="va">MyExpRootDir</span><span class="op">)</span><span class="op">)</span>

<span class="co"># copy files to Experiment Root Directory</span>
<span class="fu"><a href="https://rdrr.io/pkg/glmtools/man/run_example_sim.html">run_example_sim</a></span><span class="op">(</span><span class="st">"GRAPLE/MyExpRoot"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">graplerURL</span> <span class="op">&lt;-</span> <span class="st">"https://graple.acis.ufl.edu"</span>  <span class="co"># specify web service address for the GRAPLEr.</span>

<span class="va">MyExp</span> <span class="op">&lt;-</span> <span class="fu">new</span><span class="op">(</span><span class="st">"Graple"</span>, GWSURL<span class="op">=</span><span class="va">graplerURL</span>, ExpRootDir<span class="op">=</span><span class="va">MyExpRootDir</span>, ResultsDir<span class="op">=</span><span class="va">MyResultsDir</span>,
                ExpName<span class="op">=</span><span class="st">"EDDIE"</span>, TempDir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="va">MyExp</span> <span class="op">&lt;-</span> <span class="fu">GrapleCheckService</span><span class="op">(</span><span class="va">MyExp</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">MyExp</span> <span class="op">&lt;-</span> <span class="fu">GrapleRunSweepExperiment</span><span class="op">(</span><span class="va">MyExp</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">MyExp</span><span class="op">@</span><span class="va">StatusMsg</span><span class="op">)</span>

<span class="va">MyExp</span> <span class="op">&lt;-</span> <span class="fu">GrapleCheckExperimentCompletion</span><span class="op">(</span><span class="va">MyExp</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">MyExp</span><span class="op">@</span><span class="va">StatusMsg</span><span class="op">)</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Jemma Stachelek.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
